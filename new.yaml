app:
  kind: statefulset
  replicas: 1
  prometheusScrapePort: 9900
  healthcheck: 
    liveness:
      periodSeconds: 10
      timeoutSeconds: 20
      initialDelaySeconds: 90
      httpGet:
        path: "/healthz"
        port: http
    readiness:
      periodSeconds: 10
      timeoutSeconds: 20
      initialDelaySeconds: 90
      httpGet:
        path: "/healthz"
        port: http
  podSecurityContext:
    fsGroup: 2000
  containers:
    - name: ses-backend-api
      image:
        repository: registry.vnpay.vn/vnpay-ocp/nds/ses-pointplus/backend-api
        tag: t-7c2b66ad
        imagePullPolicy: IfNotPresent
      command: ["java"]
      args: ["-jar", "-Xms257m", "-Xmx512m", "backend-api.jar"]
      ports: [7003]
      env:
        - name: TZ
          value: Asia/Ho_Chi_Minh
      resources:
        limits:
          cpu: 2
          memory: 2Gi
        requests:
          cpu: 1
          memory: 1Gi
      volumeMounts:
        - name: backend-api-data
          mountPath: /home/nds/app/export
          subPath: export

service:
  type: ClusterIP
  svcPort:
    - 7003:7003

route:
  enabled: true
  hosts:
    - host: sesv4backofficeapi.vnpaytest.vn
      annotations:
        haproxy.router.openshift.io/timeout: 300s
      port: 7003
      tls:
        enabled: false

volume:
  - name: backend-api-data
    persistentVolumeClaim:
      claimName: pvc-backend-api

pvc:
  enabled: true
  claims:
    - name: pvc-backend-api
      storageClass: csi-rbd-sc
      capacity: 1Gi
      accessMode:
        - ReadWriteOnce
      volumeMode: Filesystem
      volumeClaimTemplates: "false"
